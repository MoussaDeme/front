{% extends "base.html" %}
{% block title %}{{ titre }}{% endblock %}
{% block content %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Gestion Bon de Commande</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">Acceuil <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="graphique">Dashboard</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Rechercher">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Rechercher</button>
    </form>
  </div>
</nav>
<section class="pt-5 w-100 p-3">
    <div class="row w-100 p-3">
        <div class="col-sm-6 offset-5 pb-5">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-bs-toggle="tooltip" data-bs-placement="top" title="Permet d'ajouter un bon de commande">Ajouter un bon de commande</button>
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Alerte</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Cette fonctionnalité n'est pas disponible pour le moment.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
                </div>
        </div>
    </div>
            <div class="ml-5 mr-5" data-bs-toggle="tooltip" data-bs-placement="top" title="Cliquez pour obtenir les details.">
                <table class="table table-striped table-secondary">
                    <thead>
                        <tr>
                            <th scope="col">N° de commmande</th>
                            <th scope="col">Nom</th>
                            <th scope="col">Montant</th>
                            <th scope="col">Date</th>
                            <th scope="col">Statut</th>
                            <th scope="col">Supprimer</th>
                        </tr>
                    </thead>
                    <tbody>
                                {%for i in range(0, len)%}
                                    <tr data-toggle="collapse" data-target="#exampleCollapse{{i}}">
                                    {%for j in range(0, 5)%}
                                        {% if tab[i][j]=="done" %}
                                            <td><button type="button" class="btn btn-sm ml-1" aria-label="Left Align" data-bs-toggle="tooltip" data-bs-placement="top" title="Bon de commande Valider"> <span class="material-icons bg-success">done</span></button></td>
                                        {% elif tab[i][j]=="clear" %}
                                            <td><button type="button" class="btn btn-sm ml-1" aria-label="Left Align" data-bs-toggle="tooltip" data-bs-placement="top" title="Bon de commande Annuler"><span class="material-icons bg-danger">clear</span></button></td>
                                        {% elif tab[i][j]=="hourglass_empty" %}
                                            <td><button type="button" class="btn btn-sm ml-1" aria-label="Left Align" data-bs-toggle="tooltip" data-bs-placement="top" title="Bon de commande en cour de traitement"><span class="material-icons bg-warning">hourglass_empty</span></button></td>
                                        {% else %}
                                            <td>{{ tab[i][j] }}</td>
                                        {% endif %}
                                     {% endfor %}
                                        <td>
                        <button type="button" class="btn btn-sm ml-3 " aria-label="Left Align" data-toggle="modal" data-target="#exampleModal1_{{ i }}" data-bs-toggle="tooltip" data-bs-placement="top" title="Supprimer">
                            <span class="material-icons material-sm" aria-hidden="true">delete_forever</span>
                        </button>
                            <div class="modal fade" id="exampleModal1_{{ i }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1_{{ i }}" aria-hidden="true">
                              <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel1_{{ i }}">Erreur</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                  </div>
                                  <div class="modal-body"> Une erreur technique est survenue veuillez réessayer ultérieurement.</div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  </div>
                                </div>
                              </div>
                            </div>
                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <section class="our-blog p-0 m-0 bg-silver collapse hide"  id="exampleCollapse{{i}}">
                                                <div id="accordion">
                                                    <div class="container work-process  pb-5 pt-5">
                                                                        <div class="row">
                                                                            <div class="col-sm-4"><button type="button" class="btn btn-outline-secondary" data-toggle="collapse" data-target="#collapse1_{{ i }}">Gestion</button></div>
                                                                            <div class="col-sm-4"><button type="button" class="btn btn-outline-secondary" data-toggle="collapse" data-target="#collapse2_{{ i }}">Budget</button></div>
                                                                            <div class="col-sm-4"><button type="button" class="btn btn-outline-secondary" data-toggle="collapse" data-target="#collapse3">Achat</button></div>
                                                                        </div>
                                                                            <!-- ============ step 1 =========== -->
                                                                        <div id="collapse1_{{ i }}" class="collapse hide"  data-parent="#accordion">
                                                                            <div class="pb-5"><h2>Gestion</h2></div>
                                                                            {% for b in range(0,lenGestion[i]) %}
                                                                                {% if b%2==0 %}
                                                                            <div class="row">
                                                                                <div class="col-md-5">

                                                                                    <div class="process-box process-left" data-aos="fade-right" data-aos-duration="1000">
                                                                                        <div class="row">
                                                                                            <div class="col-md-5">
                                                                                                <div class="process-step">
                                                                                                    <p class="m-0 p-0">Valideur</p>
                                                                                                    <h2 class="m-0 p-0">{{ b+1 }}</h2>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-7">
                                                                                                <h5>{{  gestion[i][b][0] }}</h5>
                                                                                                <p><small>{{  gestion[i][b][1] }} </small></p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="process-line-l"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2"></div>
                                                                                <div class="col-md-5">
                                                                                    <div class="process-point-right"></div>
                                                                                </div>
                                                                            </div>

                                                                            <!-- ============ step 2 =========== -->
                                                                            {% else %}
                                                                                <div class="row">

                                                                                <div class="col-md-5">
                                                                                    <div class="process-point-left"></div>
                                                                                </div>
                                                                                <div class="col-md-2"></div>
                                                                                <div class="col-md-5">
                                                                                    <div class="process-box process-right" data-aos="fade-left" data-aos-duration="1000">
                                                                                        <div class="row">
                                                                                            <div class="col-md-5">
                                                                                                <div class="process-step">
                                                                                                    <p class="m-0 p-0">Valideur</p>
                                                                                                    <h2 class="m-0 p-0">{{ b+1 }}</h2>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-7">
                                                                                                <h5>{{  gestion[i][b][0] }}</h5>
                                                                                                <p><small>{{  gestion[i][b][1] }} </small></p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="process-line-r"></div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                                {% endif %}
                                                                                {% endfor %}
                                                                        </div>

                                                                          <!-- ============ step 1 =========== -->
                                                                        <div id="collapse2_{{ i }}" class="collapse hide"  data-parent="#accordion">
                                                                            <div class="pb-5"><h2>Budget</h2></div>
                                                                            {% for b in range(0,lenBudget[i]) %}
                                                                                {% if b%2==0 %}
                                                                            <div class="row">
                                                                                <div class="col-md-5">

                                                                                    <div class="process-box process-left" data-aos="fade-right" data-aos-duration="1000">
                                                                                        <div class="row">
                                                                                            <div class="col-md-5">
                                                                                                <div class="process-step">
                                                                                                    <p class="m-0 p-0">Valideur</p>
                                                                                                    <h2 class="m-0 p-0">{{ b+1 }}</h2>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-7">
                                                                                                <h5>{{  budget[i][b][0] }}</h5>
                                                                                                <p><small>{{  budget[i][b][1] }} </small></p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="process-line-l"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2"></div>
                                                                                <div class="col-md-5">
                                                                                    <div class="process-point-right"></div>
                                                                                </div>
                                                                            </div>

                                                                            <!-- ============ step 2 =========== -->
                                                                            {% else %}
                                                                                <div class="row">

                                                                                <div class="col-md-5">
                                                                                    <div class="process-point-left"></div>
                                                                                </div>
                                                                                <div class="col-md-2"></div>
                                                                                <div class="col-md-5">
                                                                                    <div class="process-box process-right" data-aos="fade-left" data-aos-duration="1000">
                                                                                        <div class="row">
                                                                                            <div class="col-md-5">
                                                                                                <div class="process-step">
                                                                                                    <p class="m-0 p-0">Valideur</p>
                                                                                                    <h2 class="m-0 p-0">{{ b+1 }}</h2>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-7">
                                                                                                <h5>{{  budget[i][b][0] }}</h5>
                                                                                                <p><small>{{  budget[i][b][1] }} </small></p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="process-line-r"></div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                                {% endif %}
                                                                                {% endfor %}
                                                                            </div>
                                                    </div>
                                                </div>
                                            </section>
                                            <script>AOS.init();</script>
                                        </td>
                                    </tr>
                                {% endfor %}

                    </tbody>
                </table>
            </div>

</section>



{% endblock %}
